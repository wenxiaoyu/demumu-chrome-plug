# M4：测试和发布 - 任务清单

## 迭代 1.13：测试和修复（0.5 天）

### 功能测试
- [ ] 1.13.1 核心功能测试
  - 首次安装：初始化数据，HP=100，功德=0
  - 敲木鱼：todayKnocks +1, totalKnocks +1, merit +1
  - 首次敲击：HP +10
  - 再次敲击：HP 不变
  - 跨天重置：todayKnocks 重置为 1
  - 连续活跃：consecutiveDays +1
  - 断活：consecutiveDays 重置为 1
  - HP 扣除：一天不敲击 HP -10
  - HP 上限：不超过 100
  - HP 下限：降到 0 时 status = 'dead'

- [ ] 1.13.2 数据统计测试
  - 敲击记录：每次敲击保存完整记录
  - 每日统计：更新当日统计
  - 活跃日历：显示当月日历，颜色深浅正确
  - 月份切换：正确切换月份
  - 关键指标：显示总功德、连续天数、存活天数

- [ ] 1.13.3 通知测试
  - 死亡通知：HP = 0 时显示
  - 警告通知：HP < 30 时显示
  - 首次敲击通知：今日首次敲击显示

- [ ] 1.13.4 UI/UX 测试
  - 木鱼动画：点击时棍子敲击、涟漪、光晕动画
  - 数字动画：数值变化时弹跳动画
  - 加载状态：数据加载中显示提示
  - 错误状态：数据加载失败显示提示
  - 空状态：无数据时显示提示
  - 响应式：不同屏幕尺寸布局正常

### 边界测试
- [ ] 1.13.5 首次使用
  - 无数据时正常初始化
  - 显示引导信息

- [ ] 1.13.6 大量敲击
  - 敲击 100+ 次
  - 功德值正确显示
  - 性能正常

- [ ] 1.13.7 长时间未使用
  - 30+ 天未敲击
  - HP 正确计算
  - 连续天数重置

- [ ] 1.13.8 HP 归零
  - HP = 0 时显示死亡状态
  - 可继续敲击恢复

- [ ] 1.13.9 跨年跨月
  - 日期计算正确
  - 日历显示正确

### 代码质量检查
- [ ] 1.13.10 TypeScript 检查
  - 运行 `npm run type-check`
  - 修复所有类型错误

- [ ] 1.13.11 构建检查
  - 运行 `npm run build`
  - 构建成功无错误和警告

- [ ] 1.13.12 代码审查
  - 移除所有 console.log
  - 移除未使用的代码
  - 移除 TODO 注释
  - 检查代码注释完整性

### Bug 修复
- [ ] 1.13.13 记录和修复 Bug
  - 记录测试中发现的 Bug
  - 按优先级修复
  - 验证修复效果

---

## 迭代 1.14：文档和发布（0.5 天）

### 文档完善
- [ ] 1.14.1 更新 README.md
  - 更新项目介绍
  - 更新功能特性列表
  - 添加安装方法
  - 添加使用说明
  - 添加截图
  - 更新技术栈
  - 添加开发指南

- [ ] 1.14.2 创建 CHANGELOG.md
  - 记录 v0.2.0 版本更新
  - 列出新增功能
  - 列出改进内容
  - 列出 Bug 修复

- [ ] 1.14.3 创建用户指南（可选）
  - 创建 `docs/USER_GUIDE.md`
  - 编写快速开始
  - 编写功能说明
  - 编写常见问题

### 截图准备
- [ ] 1.14.4 准备 Popup 截图
  - 截取木鱼界面
  - 截取 HP、功德值、连续天数显示
  - 保存到 `docs/screenshots/`

- [ ] 1.14.5 准备 Options 截图
  - 截取关键指标
  - 截取活跃日历
  - 保存到 `docs/screenshots/`

- [ ] 1.14.6 准备通知截图（可选）
  - 截取通知示例
  - 保存到 `docs/screenshots/`

### 发布准备
- [ ] 1.14.7 更新版本号
  - 更新 `package.json` version 为 "0.2.0"
  - 更新 `src/manifest.json` version 为 "0.2.0"

- [ ] 1.14.8 构建生产版本
  - 运行 `npm run build`
  - 检查构建输出
  - 检查无错误和警告

- [ ] 1.14.9 手动测试打包版本
  - 在 Chrome 中加载 dist 目录
  - 测试所有核心功能
  - 检查无 Console 错误

- [ ] 1.14.10 创建 Git 标签
  - 提交所有更改
  - 运行 `git tag -a v0.2.0 -m "Release v0.2.0: MVP 本地版"`
  - 运行 `git push origin main`
  - 运行 `git push origin v0.2.0`

- [ ] 1.14.11 打包发布文件
  - 创建 zip 文件：`demumu-chrome-extension-v0.2.0.zip`
  - 包含 dist 目录所有文件

- [ ] 1.14.12 创建 GitHub Release
  - 在 GitHub 创建新 Release
  - 选择标签 v0.2.0
  - 上传 zip 文件
  - 添加 Release Notes
  - 添加截图
  - 发布

### 最终检查
- [ ] 1.14.13 最终功能检查
  - 从 GitHub Release 下载 zip
  - 在 Chrome 中加载
  - 测试所有核心功能
  - 确认无问题

- [ ] 1.14.14 最终文档检查
  - 检查 README.md
  - 检查 CHANGELOG.md
  - 确认无错别字

---

## 完成标准

### 必须完成
- [ ] 所有功能测试通过
- [ ] 所有边界测试通过
- [ ] 代码质量达标（TypeScript 和构建检查通过）
- [ ] 关键 Bug 修复
- [ ] 文档完整（README + CHANGELOG）
- [ ] 截图准备完成
- [ ] 成功构建和打包
- [ ] 成功发布到 GitHub

### 验收检查
- [ ] 无阻塞性 Bug
- [ ] TypeScript 类型检查通过
- [ ] 构建成功无错误
- [ ] 文档完整准确
- [ ] 可以成功加载到 Chrome
- [ ] 所有核心功能正常工作

## 时间安排

**上午（0.5 天）：测试和修复**
- 功能测试（1.13.1 - 1.13.4）
- 边界测试（1.13.5 - 1.13.9）
- 代码质量检查（1.13.10 - 1.13.12）
- Bug 修复（1.13.13）

**下午（0.5 天）：文档和发布**
- 文档完善（1.14.1 - 1.14.3）
- 截图准备（1.14.4 - 1.14.6）
- 发布准备（1.14.7 - 1.14.12）
- 最终检查（1.14.13 - 1.14.14）

## 注意事项

1. **测试覆盖**：确保测试所有核心功能和边界情况
2. **Bug 优先级**：优先修复阻塞性 Bug
3. **文档准确性**：确保文档与实际功能一致
4. **截图质量**：使用清晰截图，展示关键功能
5. **发布检查**：发布前再次测试打包版本

## 测试工具

- Chrome DevTools
  - Console：检查错误
  - Application：检查存储
  - Performance：检查性能（可选）

## 下一步

完成 M4 后：
1. 🎉 庆祝 MVP 完成！
2. 收集用户反馈
3. 规划下一阶段功能

**准备好发布了吗？让我们完成最后的冲刺！🚀**
