# M5ï¼šæ­»äº¡é€šçŸ¥ç³»ç»Ÿï¼ˆè¿­ä»£ 1.15 - 1.17ï¼‰

## ç›®æ ‡

å®ç°æ ¸å¿ƒçš„"æ­»äº¡é€šçŸ¥"åŠŸèƒ½ï¼Œå½“ç”¨æˆ·é•¿æ—¶é—´æœªæ´»è·ƒæ—¶ï¼Œè‡ªåŠ¨å‘ç´§æ€¥è”ç³»äººå‘é€é‚®ä»¶é€šçŸ¥ã€‚

**é‡Œç¨‹ç¢‘ä»·å€¼ï¼š** å®ç°äº§å“çš„æ ¸å¿ƒä»·å€¼ - çœŸæ­£çš„"è¿˜æ´»ç€å—"æ­»äº¡é€šçŸ¥ç³»ç»Ÿã€‚

## æ—¶é—´ä¼°ç®—

**æ€»è®¡ï¼š2 å¤©**

- è¿­ä»£ 1.15ï¼šç´§æ€¥è”ç³»äººç®¡ç†ï¼ˆ0.5 å¤©ï¼‰
- è¿­ä»£ 1.16ï¼šæ­»äº¡æ£€æµ‹ç®—æ³•ï¼ˆ0.5 å¤©ï¼‰
- è¿­ä»£ 1.17ï¼šé‚®ä»¶å‘é€ç³»ç»Ÿï¼ˆ1 å¤©ï¼‰

## èŒƒå›´

### åŒ…å«
- âœ… ç´§æ€¥è”ç³»äººç®¡ç†ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰
- âœ… è”ç³»äººåˆ†ç»„åŠŸèƒ½
- âœ… æ­»äº¡æ£€æµ‹ç®—æ³•ï¼ˆå¯é…ç½®é˜ˆå€¼ï¼‰
- âœ… é‚®ä»¶å†…å®¹æ¨¡æ¿è®¾è®¡
- âœ… é‚®ä»¶å‘é€è§¦å‘æœºåˆ¶
- âœ… æœ¬åœ°é‚®ä»¶å‘é€ï¼ˆä½¿ç”¨ mailto åè®®ï¼‰

### ä¸åŒ…å«
- âŒ äº‘ç«¯é‚®ä»¶æœåŠ¡ï¼ˆPhase 3ï¼‰
- âŒ è‡ªåŠ¨é‚®ä»¶å‘é€ï¼ˆéœ€è¦åç«¯æœåŠ¡ï¼‰
- âŒ é‚®ä»¶å‘é€å†å²è®°å½•ï¼ˆPhase 3ï¼‰
- âŒ é‚®ä»¶æ¨¡æ¿è‡ªå®šä¹‰ï¼ˆPhase 2ï¼‰

## è¯¦ç»†è®¾è®¡

### è¿­ä»£ 1.15ï¼šç´§æ€¥è”ç³»äººç®¡ç†

#### 1. æ•°æ®æ¨¡å‹

```typescript
// è”ç³»äººæ¥å£
interface EmergencyContact {
  id: string;                    // å”¯ä¸€æ ‡è¯†
  name: string;                  // å§“å
  email: string;                 // é‚®ç®±åœ°å€
  relationship: string;          // å…³ç³»ï¼ˆå®¶äººã€æœ‹å‹ã€åŒäº‹ç­‰ï¼‰
  group: ContactGroup;           // æ‰€å±åˆ†ç»„
  priority: number;              // ä¼˜å…ˆçº§ï¼ˆ1-5ï¼Œ1æœ€é«˜ï¼‰
  createdAt: number;             // åˆ›å»ºæ—¶é—´
  updatedAt: number;             // æ›´æ–°æ—¶é—´
}

// è”ç³»äººåˆ†ç»„
enum ContactGroup {
  Family = 'family',             // å®¶äºº
  Friend = 'friend',             // æœ‹å‹
  Colleague = 'colleague',       // åŒäº‹
  Other = 'other'                // å…¶ä»–
}

// è”ç³»äººæ•°æ®å­˜å‚¨
interface ContactsData {
  contacts: EmergencyContact[];
  version: number;
}
```

#### 2. è”ç³»äººæœåŠ¡

```typescript
// src/background/services/contact-service.ts
class ContactService {
  // æ·»åŠ è”ç³»äºº
  async addContact(contact: Omit<EmergencyContact, 'id' | 'createdAt' | 'updatedAt'>): Promise<EmergencyContact>
  
  // æ›´æ–°è”ç³»äºº
  async updateContact(id: string, updates: Partial<EmergencyContact>): Promise<EmergencyContact>
  
  // åˆ é™¤è”ç³»äºº
  async deleteContact(id: string): Promise<void>
  
  // è·å–æ‰€æœ‰è”ç³»äºº
  async getAllContacts(): Promise<EmergencyContact[]>
  
  // æŒ‰åˆ†ç»„è·å–è”ç³»äºº
  async getContactsByGroup(group: ContactGroup): Promise<EmergencyContact[]>
  
  // æŒ‰ä¼˜å…ˆçº§æ’åºè·å–è”ç³»äºº
  async getContactsByPriority(): Promise<EmergencyContact[]>
  
  // éªŒè¯é‚®ç®±æ ¼å¼
  private validateEmail(email: string): boolean
}
```

#### 3. UI è®¾è®¡

**è®¾ç½®å…¥å£ï¼ˆPopup é¡µé¢åº•éƒ¨ï¼‰**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [HP Bar]                                â”‚
â”‚  [æœ¨é±¼åœºæ™¯]                              â”‚
â”‚  [ç»Ÿè®¡å¡ç‰‡]                              â”‚
â”‚                                          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  è¿˜æ´»ç€å—  Â·  Â© 2025           âš™ï¸      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

ç‚¹å‡» âš™ï¸ å›¾æ ‡æ‰“å¼€ Options é¡µé¢çš„è®¾ç½®æ ‡ç­¾ã€‚

**è”ç³»äººç®¡ç†é¡µé¢ï¼ˆOptions é¡µé¢æ–°å¢æ ‡ç­¾ï¼‰**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¿˜æ´»ç€å—                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ç»Ÿè®¡ â”‚ç´§æ€¥è”ç³»äººâ”‚è®¾ç½® â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                          â”‚
â”‚  ç´§æ€¥è”ç³»äºº                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ + æ·»åŠ è”ç³»äºº                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                          â”‚
â”‚  å®¶äºº (2)                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ‘¤ å¼ ä¸‰                             â”‚ â”‚
â”‚  â”‚    zhang@example.com               â”‚ â”‚
â”‚  â”‚    ä¼˜å…ˆçº§: â­â­â­â­â­              â”‚ â”‚
â”‚  â”‚    [ç¼–è¾‘] [åˆ é™¤]                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ‘¤ æå››                             â”‚ â”‚
â”‚  â”‚    li@example.com                  â”‚ â”‚
â”‚  â”‚    ä¼˜å…ˆçº§: â­â­â­â­                â”‚ â”‚
â”‚  â”‚    [ç¼–è¾‘] [åˆ é™¤]                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                          â”‚
â”‚  æœ‹å‹ (1)                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ‘¤ ç‹äº”                             â”‚ â”‚
â”‚  â”‚    wang@example.com                â”‚ â”‚
â”‚  â”‚    ä¼˜å…ˆçº§: â­â­â­                  â”‚ â”‚
â”‚  â”‚    [ç¼–è¾‘] [åˆ é™¤]                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ·»åŠ /ç¼–è¾‘è”ç³»äººå¯¹è¯æ¡†**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ·»åŠ ç´§æ€¥è”ç³»äºº                      â”‚
â”‚                                      â”‚
â”‚  å§“å *                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ å¼ ä¸‰                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                      â”‚
â”‚  é‚®ç®± *                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ zhang@example.com              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                      â”‚
â”‚  å…³ç³»                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ å®¶äºº 